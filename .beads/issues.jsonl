{"id":"modest-0i9","title":"Extract duplicate restoration logic in Create methods","description":"ProductRepository.CreateProductAsync and SupplierRepository.CreateSupplierAsync have nearly identical soft-delete restoration logic (lines 137-158 and 118-142). Extract to helper method or base class to reduce ~40 lines of duplication.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T22:07:28.177615+05:00","updated_at":"2025-12-17T13:22:10.330833+05:00","closed_at":"2025-12-17T13:22:10.330833+05:00","close_reason":"Closed","labels":["DRY refactoring"]}
{"id":"modest-0o7","title":"Extract shared validator rules to reduce validator duplication","description":"ProductUpdateDtoValidator lines 11-29 duplicate ProductCreateDtoValidator lines 9-27. Same pattern exists for Supplier validators. Extract shared rules into base validator or use inheritance to reduce ~60 lines of duplicated code across 4+ validator files.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T19:43:43.507077+05:00","updated_at":"2025-12-16T21:04:02.169955+05:00","closed_at":"2025-12-16T21:04:02.169955+05:00","close_reason":"Closed","labels":["DRY","refactoring"]}
{"id":"modest-1ye","title":"Replace DateTimeOffset.UtcNow with ITimeProvider for testability","description":"Repositories use DateTimeOffset.UtcNow directly (10+ occurrences), making time-dependent tests difficult. Inject ITimeProvider/ISystemClock for better testability and Dependency Inversion Principle compliance.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T22:08:27.85846+05:00","updated_at":"2025-12-16T22:08:27.85846+05:00","labels":["SOLID","refactoring","testing"]}
{"id":"modest-84b","title":"Create BaseLookupEndpoint for lookup endpoint duplication","description":"GetProductLookupEndpoint and GetSupplierLookupEndpoint have identical structure (27 lines each). Only differences: service type, DTO type, resource path. Create BaseLookupEndpoint\u003cTService, TLookupDto\u003e to reduce duplication.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T22:07:12.621816+05:00","updated_at":"2025-12-16T22:19:25.783028+05:00","closed_at":"2025-12-16T22:19:25.783028+05:00","close_reason":"Closed","labels":["DRY refactoring"]}
{"id":"modest-861","title":"Create BaseRepository to eliminate 80%+ duplicate repository logic","description":"ProductRepository and SupplierRepository have massive code duplication: index creation (lines 24-58), pagination logic (lines 100-130), soft delete logic, IsDeleted filtering (lines 67-90), and duplicate checking with restoration (lines 250-275 in Product, 180-215 in Supplier). Create generic BaseRepository\u003cTEntity, TDto, TCreateDto, TUpdateDto\u003e to reduce ~300 lines of duplicated code.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T19:42:58.229754+05:00","updated_at":"2025-12-16T21:54:14.735034+05:00","closed_at":"2025-12-16T21:54:14.735034+05:00","close_reason":"Closed","labels":["DRY","refactoring"]}
{"id":"modest-8mt","title":"Create PaginationHelper.BuildResponse to eliminate duplicate pagination code","description":"Lines 124-132 in ProductRepository and 109-122 in SupplierRepository repeat the same PaginatedResponse building code. Create helper method PaginationHelper.BuildResponse\u003cT\u003e() to eliminate this duplication.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T19:42:59.767859+05:00","updated_at":"2025-12-16T20:47:27.158374+05:00","closed_at":"2025-12-16T20:47:27.158374+05:00","close_reason":"Closed","labels":["DRY","refactoring"]}
{"id":"modest-9cy","title":"Security: Review AllowAnonymous on all endpoints","description":"All endpoints use AllowAnonymous() which bypasses authentication. This is likely for development but should be reviewed. Consider implementing proper authentication/authorization before production. Affects 17 endpoint files.","status":"blocked","priority":0,"issue_type":"bug","created_at":"2025-12-16T22:07:49.354197+05:00","updated_at":"2025-12-16T22:10:01.700652+05:00","labels":["bug","security"],"comments":[{"id":3,"issue_id":"modest-9cy","author":"aziz_mirzayev","text":"Blocked: Authentication/authorization system not yet implemented. AllowAnonymous() is currently necessary for all endpoints to function. This should be addressed after implementing auth system (consider creating auth implementation issue as dependency).","created_at":"2025-12-16T17:10:01Z"}]}
{"id":"modest-b2q","title":"PaginatedRequest throws ValidationException in setter (anti-pattern)","description":"PaginatedRequest.PageNumber and PageSize setters throw ValidationException directly. This violates separation of concerns - properties shouldn't validate. Move validation to FluentValidation validator. See lines 12-31 in PaginatedRequest.cs.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T22:07:56.563795+05:00","updated_at":"2025-12-16T22:07:56.563795+05:00","labels":["SOLID","refactoring"]}
{"id":"modest-cdx","title":"Extract MongoDB transaction pattern to reduce duplication","description":"All Create methods use identical transaction pattern: StartSession, StartTransaction, try/catch with Commit/Abort. Consider extracting to ExecuteInTransaction\u003cT\u003e helper method to reduce ~10 lines per method (6 methods = ~60 lines saved).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T22:07:41.548764+05:00","updated_at":"2025-12-16T22:07:41.548764+05:00","labels":["DRY refactoring"]}
{"id":"modest-cv2","title":"Consider BaseGetAllEndpoint for GetAll endpoint duplication","description":"GetAllProductsEndpoint and GetAllSuppliersEndpoint have similar structure (~45 lines each) with nested request classes. Challenge: nested classes make abstraction complex. Evaluate if BaseGetAllEndpoint\u003cTService, TFilter, TDto\u003e would simplify or complicate per KISS principle.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T22:08:13.802843+05:00","updated_at":"2025-12-16T22:08:13.802843+05:00","labels":["DRY refactoring"]}
{"id":"modest-df8","title":"Create BaseGetByIdEndpoint for GetById endpoint duplication","description":"GetProductByIdEndpoint and GetSupplierByIdEndpoint have identical structure (31 lines each). Create BaseGetByIdEndpoint\u003cTService, TDto\u003e generic base class.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T22:07:05.208277+05:00","updated_at":"2025-12-16T22:13:09.747637+05:00","closed_at":"2025-12-16T22:13:09.747637+05:00","close_reason":"Closed","labels":["DRY refactoring"]}
{"id":"modest-e22","title":"Create generic GetDistinctFieldLookupAsync method","description":"ProductRepository has duplicate logic in GetManufacturerLookupDtosAsync (lines 167-195) and GetCountryLookupDtosAsync (lines 197-222). Create generic GetDistinctFieldLookupAsync\u003cT\u003e(fieldName, request) method to eliminate this duplication.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T19:43:00.109015+05:00","updated_at":"2025-12-16T20:56:18.14399+05:00","closed_at":"2025-12-16T20:56:18.14399+05:00","close_reason":"Closed","labels":["DRY","refactoring"]}
{"id":"modest-iai","title":"Standardize entity-to-DTO mapping method names","description":"Inconsistent naming: SupplierEntity uses ToDto() while ProductEntity uses ToProductDto(). Standardize to either pattern across all entities for consistency and discoverability.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-16T22:08:34.965785+05:00","updated_at":"2025-12-17T13:44:24.492486+05:00","labels":["consistency","refactoring"]}
{"id":"modest-l9l","title":"Remove unused generic type parameters from BaseRepository","description":"BaseRepository has TCreateDto and TUpdateDto generic parameters but doesn't use them (CRUD moved back to repos). Violates Interface Segregation Principle. Remove unused parameters to simplify signature.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T22:07:19.917937+05:00","updated_at":"2025-12-17T12:43:40.986875+05:00","closed_at":"2025-12-17T12:43:40.986875+05:00","close_reason":"Closed","labels":["SOLID","refactoring"]}
{"id":"modest-mhd","title":"Extract duplicate conflict resolution logic in Update methods","description":"ProductRepository.UpdateProductAsync and SupplierRepository.UpdateSupplierAsync have identical conflict resolution logic (lines 188-198). Both rename deleted duplicates. Extract to helper method to reduce duplication.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T22:07:34.145993+05:00","updated_at":"2025-12-17T13:41:23.817181+05:00","closed_at":"2025-12-17T13:41:23.817181+05:00","close_reason":"Closed","labels":["DRY refactoring"]}
{"id":"modest-of8","title":"Extract magic strings to constants (sequence keys, code prefixes)","description":"ProductService and SupplierService have magic strings: 'products'/'suppliers' (sequence keys), 'SKU-'/'SUP-' (code prefixes). Extract to constants or configuration to improve maintainability and prevent typos.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T22:08:20.620031+05:00","updated_at":"2025-12-17T13:44:00.417126+05:00","closed_at":"2025-12-17T13:44:00.417126+05:00","close_reason":"Closed","labels":["best-practices","refactoring"]}
{"id":"modest-org","title":"Create generic base endpoints to eliminate CRUD duplication","description":"Every endpoint (CreateProductEndpoint, CreateSupplierEndpoint, UpdateProductEndpoint, etc.) has nearly identical structure. Create base generic endpoints like CreateEndpoint\u003cTService, TCreateDto, TDto\u003e to reduce ~400 lines of duplicated code across 16 endpoint files.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T19:42:38.35506+05:00","updated_at":"2025-12-16T22:04:29.038943+05:00","closed_at":"2025-12-16T22:04:29.038943+05:00","close_reason":"Closed","labels":["DRY","refactoring"],"comments":[{"id":2,"issue_id":"modest-org","author":"aziz_mirzayev","text":"Completed: Created BaseCreateEndpoint, BaseUpdateEndpoint, BaseDeleteEndpoint\n\nResults:\n- 6 CRUD endpoints refactored (Product/Supplier Create/Update/Delete)\n- Each endpoint reduced from ~24 lines to ~16 lines (33% reduction)\n- 3 base classes (89 lines total) provide reusable patterns\n- Simple abstraction: only ResourcePath, ResourceName, and service method call differ\n\nUnlike service layer, endpoint structure is truly boilerplate - perfect for abstraction.\n\nRemaining opportunities:\n- GetAll endpoints: Have nested request classes, would need different approach\n- Lookup endpoints: Different patterns, may not benefit from abstraction\n- Future endpoints will immediately benefit from base classes\n\nAll 169 tests passing.","created_at":"2025-12-16T17:04:28Z"}]}
{"id":"modest-wpj","title":"Create single IdRequest class to replace duplicate request classes","description":"Every GetById/Delete endpoint has identical request classes: DeleteProductRequest, DeleteSupplierRequest, GetProductByIdRequest, GetSupplierByIdRequest - all just contain 'public Guid Id'. Create single IdRequest class in Common namespace to reduce ~24 lines across 8 files.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T19:42:59.436731+05:00","updated_at":"2025-12-16T19:56:04.763973+05:00","closed_at":"2025-12-16T19:56:04.763973+05:00","close_reason":"Closed","labels":["DRY","refactoring"]}
{"id":"modest-ydi","title":"Create BaseService to eliminate duplicate service layer logic","description":"ProductService and SupplierService are nearly identical with duplicated validation logic (lines 72-74 in Product, 54-56 in Supplier), logging patterns in every method, and pass-through methods (GetAll, GetById, etc.). Create abstract BaseService\u003cTEntity, TDto, TCreateDto, TUpdateDto\u003e to reduce ~80 lines of duplicated code.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T19:42:58.726653+05:00","updated_at":"2025-12-16T21:57:09.696261+05:00","closed_at":"2025-12-16T21:57:09.696261+05:00","close_reason":"Closed","labels":["DRY","refactoring"],"comments":[{"id":1,"issue_id":"modest-ydi","author":"aziz_mirzayev","text":"Analysis: Services have entity-specific concerns that don't abstract well:\n- Logging: ProductServiceLog vs SupplierServiceLog with different event IDs and messages\n- Code generation: SKU- vs SUP- patterns with different sequence keys\n- Pass-through methods: Already 1-liners, hard to simplify further\n- ValidationHelper.ValidateAndThrow: Already extracted to helper\n\nCreating BaseService would require:\n- Callback delegates for logging (callback hell, same issue we had with BaseRepository)\n- Abstract methods for code generation\n- Complex generics for minimal benefit (~20 lines saved vs added complexity)\n\nRecommendation: Keep services explicit per KISS principle, like we did with repository CRUD operations. The 'duplication' is actually entity-specific business logic that should stay visible.","created_at":"2025-12-16T16:55:39Z"}]}
{"id":"modest-zy2","title":"Improve exception handling in repository transaction blocks","description":"Repository Create methods catch all exceptions and abort transaction. Consider catching specific exceptions (e.g., MongoException) and logging before re-throwing. Bare catch/throw hides exception context and makes debugging harder.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T22:08:04.093772+05:00","updated_at":"2025-12-16T22:08:04.093772+05:00","labels":["best-practices"]}
